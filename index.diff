diff --git a/index.html b/index.html
index 8b79cba3da663b0771ff523cfb14f779572b986c..fcffa532f8c89cdfe83f005ff5619f74b745e096 100644
--- a/index.html
+++ b/index.html
@@ -112,50 +112,57 @@
       border:none;
       cursor:pointer;
       font-size:0.9rem;
       font-weight:600;
       transition:transform 0.06s ease, box-shadow 0.06s ease, background 0.1s;
       white-space:nowrap;
     }
     .btn-primary {
       background:linear-gradient(135deg,#8CAF0B,#a9d51a);
       color:#111827;
       box-shadow:0 10px 25px rgba(140,175,11,0.45);
     }
     .btn-primary:active {
       transform:translateY(1px) scale(.99);
       box-shadow:0 4px 12px rgba(140,175,11,0.35);
     }
     .btn-secondary {
       background:#27272a;
       color:#e5e7eb;
       border:1px solid #3f3f46;
     }
     .btn-secondary:active {
       transform:translateY(1px) scale(.99);
       box-shadow:0 4px 12px rgba(0,0,0,0.7);
     }
+    .btn-compact {
+      padding:6px 10px;
+      font-size:0.8rem;
+    }
+    .btn-api {
+      flex:1;
+    }
 
     .options-layout {
       margin-top:8px;
       display:grid;
       grid-template-columns:repeat(3, minmax(0,1fr));
       grid-auto-rows:auto;
       gap:8px;
       align-items:start;
     }
     #box-current {
       grid-column:2 / 3;
       grid-row:1;
     }
     #box-roll1 {
       grid-column:1 / 2;
       grid-row:2;
     }
     #box-roll2 {
       grid-column:2 / 3;
       grid-row:2;
     }
     #box-roll3 {
       grid-column:3 / 4;
       grid-row:2;
     }
@@ -378,58 +385,58 @@
   <div class="subtitle">큐브 시뮬레이터</div>
   <div class="page-meta">
     <span id="updateDate"></span>
     <span>/ 제작: 크로아 - 윈메롱</span>
   </div>
 
   <div class="layout">
     <div class="layout-column">
       <!-- 1. 설정 카드 -->
       <section class="card" id="card-settings">
         <h2>설정</h2>
 
         <!-- 내 장비 불러오기 (Nexon Open API) -->
         <div style="margin-top:10px; padding-top:10px; border-top:1px dashed #2d2d2d;">
           <label style="margin-bottom:6px; font-size:0.9rem;">
             <input type="checkbox" id="useMyEquipToggle" />
             내 장비 불러오기 (API Key 필요)
           </label>
 
           <div id="myEquipPanel" style="display:none; margin-top:8px;">
             <div class="row">
               <div>
                 <label for="nxApiKey">Nexon Open API Key</label>
                 <input id="nxApiKey" type="password" placeholder="x-nxopen-api-key" style="width:100%; padding:6px 8px; border-radius:8px; border:1px solid #3f3f46; background:#111111; color:#e5e7eb; font-size:0.9rem;" />
                 <div style="display:flex; gap:8px; align-items:center; margin-top:6px;">
-                  <button type="button" class="btn btn-secondary" id="clearApiKeyBtn" style="padding:6px 10px; font-size:0.8rem;">저장된 키 삭제</button>
+                  <button type="button" class="btn btn-secondary btn-compact btn-api" id="clearApiKeyBtn">저장된 키 삭제</button>
                 </div>
               </div>
               <div>
                 <label for="characterName">캐릭터 닉네임</label>
                 <input id="characterName" type="text" placeholder="닉네임" style="width:100%; padding:6px 8px; border-radius:8px; border:1px solid #3f3f46; background:#111111; color:#e5e7eb; font-size:0.9rem;" />
                 <div style="display:flex; gap:8px; margin-top:10px;">
-                  <button type="button" class="btn btn-primary" id="fetchMyEquipBtn" style="flex:1;">장비 불러오기</button>
+                  <button type="button" class="btn btn-primary btn-compact btn-api" id="fetchMyEquipBtn">장비 불러오기</button>
                 </div>
                 <div id="myEquipStatus" style="margin-top:6px; font-size:0.8rem; color:#a1a1aa;"></div>
               </div>
             </div>
 
             <div class="row" style="margin-top:6px;">
               <div>
                 <label for="equipPreset">프리셋</label>
                 <select id="equipPreset">
                   <option value="1" selected>프리셋 1</option>
                   <option value="2">프리셋 2</option>
                   <option value="3">프리셋 3</option>
                 </select>
               </div>
               <div>
                 <label for="myEquipSelect">장비 선택 (레전만 가능)</label>
                 <select id="myEquipSelect" disabled>
                   <option value="">(먼저 장비를 불러오세요)</option>
                 </select>
               </div>
             </div>
 
             <div class="row" style="margin-top:6px;">
               <div>
                 <label>자동 설정</label>
@@ -616,51 +623,51 @@
             </select>
           </div>
 
           <div id="armorCritRow" style="display:flex; align-items:center; gap:8px; margin-top:8px; flex-wrap:wrap;">
             <label for="armorCritMin" style="margin:0; font-size:0.85rem;">목표 최소 크뎀 줄 수</label>
             <select id="armorCritMin" style="max-width:110px;">
               <option value="0">없음</option>
               <option value="1">크</option>
               <option value="2">크크</option>
               <option value="3">크크크</option>
             </select>
           </div>
 
           <div id="accessoryDropRow" style="display:flex; align-items:center; gap:8px; margin-top:8px; flex-wrap:wrap;">
             <label for="accessoryDropMin" style="margin:0; font-size:0.85rem;">목표 드메 줄 수</label>
             <select id="accessoryDropMin" style="max-width:110px;">
               <option value="0">0줄</option>
               <option value="1">1줄</option>
               <option value="2">2줄</option>
             </select>
           </div>
         </div>
       </div>
 
       <div style="margin-top:10px; display:flex; gap:8px;">
-        <button class="btn btn-secondary" id="applyResetBtn" style="flex:1;">적용 및 리셋</button>
+        <button class="btn btn-secondary" id="applyResetBtn" style="flex:1;">조건 적용</button>
       </div>
       </section>
 
       <!-- 4. 로그 (토글 가능) -->
       <section class="card" id="card-log">
         <h2>
           <div class="log-header-row">
             <span>로그 (최근 100회)</span>
             <button type="button" id="toggleLogBtn" class="log-toggle-btn">펼치기</button>
           </div>
         </h2>
         <div id="log" style="display:none;"></div>
       </section>
     </div>
 
     <div class="layout-column">
       <!-- 2. 옵션 카드 + 재설정 버튼 -->
       <section class="card" id="card-options">
         <h2>잠재 옵션</h2>
 
       <div class="options-layout">
         <div class="option-box current" id="box-current">
           <div class="option-title">현재 옵션</div>
           <div class="option-inner">
             <div class="option-lines" id="lines-current"></div>
@@ -731,50 +738,56 @@
       "보조무기": 3,
       "포스실드": 4,
       "소울링": 4,
       "방패": 5,
       "모자": 6,
       "상의": 7,
       "한벌옷": 8,
       "하의": 9,
       "신발": 10,
       "장갑": 11,
       "망토": 12,
       "벨트": 13,
       "어깨장식": 14,
       "얼굴장식": 15,
       "눈장식": 16,
       "귀고리": 17,
       "반지": 18,
       "펜던트": 19,
       "기계심장": 20
     };
 
     function isLegendary(grade) {
       return grade === "레전드리";
     }
 
+    function getGradeInitial(grade) {
+      if (!grade) return "-";
+      const trimmed = String(grade).trim();
+      return trimmed ? trimmed.charAt(0) : "-";
+    }
+
     function formatDateYYYYMMDD(d) {
       const y = d.getFullYear();
       const m = String(d.getMonth() + 1).padStart(2, "0");
       const day = String(d.getDate()).padStart(2, "0");
       return `${y}-${m}-${day}`;
     }
 
     function getDefaultNxDate() {
       // Open API는 지연이 있을 수 있어 기본은 전일
       const d = new Date();
       d.setDate(d.getDate() - 1);
       return formatDateYYYYMMDD(d);
     }
 
     function setMyEquipStatus(text, isError=false) {
       const el = document.getElementById("myEquipStatus");
       if (!el) return;
       el.textContent = text || "";
       el.style.color = isError ? "#fca5a5" : "#a1a1aa";
     }
 
     function setControlsDisabledByMyEquipMode(disabled) {
       const itemLevel = document.getElementById("itemLevel");
       const partsType = document.getElementById("partsType");
       if (itemLevel) itemLevel.disabled = disabled;
@@ -838,56 +851,54 @@
           key,
           idx,
           item_name: it.item_name,
           partName,
           partsType,
           reqLev: it.item_base_option?.base_equipment_level ?? it.item_base_option?.base_req_level ?? it.item_description?.req_lev ?? it.item_equipment_req_level ?? it.item_equipment_level ?? it.item_equipment_req_lev ?? it.item_equipment_reqlev ?? it.item_req_lev ?? it.item_equipment_req ?? it.item_equipment_req_level ?? it.item_equipment_req_lev, // defensive
           // most reliable in your sample: item_equipment_req_level
           reqLev2: it.item_equipment_req_level,
           mainGrade,
           addGrade,
           mainLines: [it.potential_option_1, it.potential_option_2, it.potential_option_3].filter(Boolean),
           addLines: [it.additional_potential_option_1, it.additional_potential_option_2, it.additional_potential_option_3].filter(Boolean),
         });
       });
 
       // reqLev 정리: sample 기준 item_equipment_req_level 사용
       out.forEach(o => {
         const v = Number(o.reqLev2 ?? o.reqLev);
         o.reqLev = Number.isFinite(v) && v > 0 ? v : null;
       });
 
       return out;
     }
 
     function buildEquipOptionLabel(e) {
-      const main = e.mainGrade ? `윗:${e.mainGrade}` : "윗:-";
-      const add  = e.addGrade  ? `아랫:${e.addGrade}` : "아랫:-";
-      const lv   = e.reqLev ? `Lv.${e.reqLev}` : "Lv.-";
+      const main = getGradeInitial(e.mainGrade);
+      const add = getGradeInitial(e.addGrade);
       const part = e.partName || "?";
-      const reason = (!isLegendary(e.mainGrade) && !isLegendary(e.addGrade)) ? " (레전더리 없음)" : "";
-      return `[${part}] ${e.item_name} (${lv}) | ${main} / ${add}${reason}`;
+      return `[${part}] ${e.item_name} (${main}/${add})`;
     }
 
     function renderMyEquipSelect() {
       const sel = document.getElementById("myEquipSelect");
       if (!sel) return;
       sel.innerHTML = "";
 
       if (!nxEquipItems.length) {
         const opt = document.createElement("option");
         opt.value = "";
         opt.textContent = "(선택 가능한 장비가 없습니다)";
         sel.appendChild(opt);
         sel.disabled = true;
         return;
       }
 
       const placeholder = document.createElement("option");
       placeholder.value = "";
       placeholder.textContent = "(아이템을 선택하세요)";
       sel.appendChild(placeholder);
 
       nxEquipItems.forEach(e => {
         const opt = document.createElement("option");
         opt.value = e.key;
         opt.textContent = buildEquipOptionLabel(e);
@@ -959,50 +970,78 @@
       return side === "addi" ? isLegendary(equip.addGrade) : isLegendary(equip.mainGrade);
     }
 
     function ensureValidCubeKindForEquip(equip) {
       if (!equip) return;
       const currentKind = getSelectedCubeKind();
       const mainOk = isSideLegendary(equip, "main");
       const addOk = isSideLegendary(equip, "addi");
 
       if (currentKind === "addi") {
         if (!addOk && mainOk) {
           setCubeKind("black");
         }
       } else {
         if (!mainOk && addOk) {
           setCubeKind("addi");
         }
       }
     }
 
     function getEquipLinesForCubeKind(equip, cubeKind) {
       const side = getSideFromCubeKind(cubeKind);
       return side === "addi" ? equip.addLines : equip.mainLines;
     }
 
+    function detectMainStatFromEquipList(equipList, cubeKind) {
+      const counts = { STR: 0, DEX: 0, INT: 0, LUK: 0, ALLSTAT: 0 };
+      if (!Array.isArray(equipList) || !equipList.length) return null;
+      equipList.forEach(equip => {
+        const linesText = getEquipLinesForCubeKind(equip, cubeKind);
+        if (!Array.isArray(linesText)) return;
+        linesText.forEach(line => {
+          const text = normalizeStatText(line);
+          if (!text) return;
+          if (text.includes("올스탯")) counts.ALLSTAT += 1;
+          if (text.includes("STR") || text.includes("힘")) counts.STR += 1;
+          if (text.includes("DEX") || text.includes("민첩")) counts.DEX += 1;
+          if (text.includes("INT") || text.includes("지력")) counts.INT += 1;
+          if (text.includes("LUK") || text.includes("운")) counts.LUK += 1;
+        });
+      });
+
+      let max = 0;
+      Object.values(counts).forEach(val => {
+        if (val > max) max = val;
+      });
+      if (!max) return null;
+
+      const winners = Object.entries(counts).filter(([, val]) => val === max);
+      if (winners.length !== 1) return null;
+      return winners[0][0];
+    }
+
     function applyNxEquipToSimulator(equip) {
       if (!equip) return;
 
       if (!equip.partsType) {
         alert(`지원하지 않는 장비 부위입니다: ${equip.partName || "?"}`);
         return;
       }
       if (!equip.reqLev) {
         alert("아이템 레벨(제한)을 확인할 수 없습니다.");
         return;
       }
 
       // 레벨/부위 자동 설정 + lock
       const itemLevelSel = document.getElementById("itemLevel");
       const partsTypeSel = document.getElementById("partsType");
 
       // itemLevel 옵션에 없는 레벨이면 가장 가까운 상위(?)가 아니라 그대로는 불가능.
       // 현재 UI는 100/120/130/140/150/160/200/250만 지원하므로, 그 외 레벨은 가장 가까운 구간으로 매핑.
       const supported = [100,120,130,140,150,160,200,250];
       let mapped = equip.reqLev;
       if (!supported.includes(mapped)) {
         // 일반적으로 140/160/200/250 구간이므로, 가장 가까운 하한으로 snap
         mapped = supported.reduce((best, v) => (Math.abs(v - equip.reqLev) < Math.abs(best - equip.reqLev) ? v : best), supported[0]);
       }
 
@@ -1014,51 +1053,50 @@
       if (auto) auto.textContent = `${equip.partName} / Lv.${equip.reqLev}`;
 
       // 큐브 종류 유효성 보정
       ensureValidCubeKindForEquip(equip);
 
       // 현재 옵션을 "내 장비 잠재"로 덮어쓰기
       const cubeKind = getSelectedCubeKind();
       const linesText = getEquipLinesForCubeKind(equip, cubeKind);
       const lines = [];
       for (let i = 0; i < 3; i++) {
         const t = linesText[i] || "-";
         lines.push({ line: i+1, optionText: t, raw: null });
       }
       currentLines = lines;
       rollCandidates = [[], [], []];
 
       // 통계 초기화 + 렌더
       meisterUsed = 0;
       mesoUsed = 0;
       rollCount = 0;
       logEntries = [];
       document.getElementById("log").textContent = "";
       updateCubeTag();
       updateStatsTags();
       renderAllBoxes();
-      applyMainStatSelection(detectMainStatFromLines(linesText));
     }
 
     let bcProbs = [];
     let wcProbs = [];
     let acProbs = []; // 명장의 큐브(윗잠재)
     let allProbs = [];
 
     const CUBE_ID_BLACK = "5062010";   // 기존 윗잠재(블랙)
     const CUBE_ID_ADDI  = "5062500";   // 기존 에디
     const CUBE_ID_MEISTER = "2711004"; // acprobs.json 확인값
 
     let currentLines = [];
     let rollCandidates = [[], [], []];
 
     let meisterUsed = 0; // 명장의 큐브 소모량(개)
     let rollCount = 0;
     let mesoUsed = 0;
     let logEntries = [];
 
     let logVisible = false;
 
     const poolCache = new Map();
 
     const ONLY_ONE_KEYWORDS = [
       "쓸만한",
@@ -1560,51 +1598,67 @@
       candBox.classList.add("fade-out-card");
 
       candBox.addEventListener("animationend", () => {
         candBox.classList.remove("fade-out-card");
 
         currentLines = cand.map(l => ({...l}));
         renderAllBoxes();
 
         currentBox.classList.remove("fade-in-card");
         void currentBox.offsetWidth;
         currentBox.classList.add("fade-in-card");
         currentBox.addEventListener("animationend", () => {
           currentBox.classList.remove("fade-in-card");
         }, { once:true });
       }, { once:true });
     }
 
     // ============= 이벤트 바인딩 =============
     function handleReset() {
       meisterUsed = 0;
       mesoUsed = 0;
       rollCount = 0;
       initCurrentOption();
     }
 
-    document.getElementById("applyResetBtn").addEventListener("click", handleReset);
+    function handleApplyConditions() {
+      const eq = useMyEquip ? getSelectedNxEquip() : null;
+      if (eq) {
+        ensureValidCubeKindForEquip(eq);
+        updateCubeTag();
+        updateStatsTags();
+        renderAllBoxes();
+        saveCurrentSettings();
+        return;
+      }
+      updateCubeTag();
+      updateStatsTags();
+      renderAllBoxes();
+      saveCurrentSettings();
+    }
+
+    document.getElementById("applyResetBtn").addEventListener("click", handleApplyConditions);
     document.getElementById("autoResetBtn").addEventListener("click", handleReset);
 
 
     document.getElementById("rollBtn").addEventListener("click", () => {
       doOneRollStep();
     });
 
     document.querySelectorAll(".option-box.candidate").forEach(box => {
       box.addEventListener("click", (e) => {
         const idx = Number(e.currentTarget.getAttribute("data-choice")) - 1;
         chooseCandidate(idx);
       });
     });
 
     document.querySelectorAll('input[name="cubeKind"]').forEach(r => {
       r.addEventListener("change", () => {
         // 큐브 타입 변경 시 통계 초기화
         meisterUsed = 0;
         mesoUsed = 0;
         rollCount = 0;
 
         updateCubeTag();
         const eq = useMyEquip ? getSelectedNxEquip() : null;
         if (eq) {
           ensureValidCubeKindForEquip(eq);
@@ -1730,50 +1784,53 @@
         try {
           const ocidRes = await fetchOcidByName(name, apiKey);
           const ocid = ocidRes?.ocid;
           if (!ocid) throw new Error("OCID를 찾지 못했습니다.");
 
           const dateStr = getDefaultNxDate();
           setMyEquipStatus(`장비 조회 중... (기준일자: ${dateStr})`);
           const equipRes = await fetchItemEquipment(ocid, apiKey, dateStr);
           nxEquipRaw = equipRes;
 
           // 저장(성공 시)
           localStorage.setItem(NX_API_STORAGE_KEY, apiKey);
 
           // preset 반영
           const presetNo = presetSel?.value || "1";
           nxEquipItems = normalizeNxEquipItems(nxEquipRaw, presetNo);
 
           // item_equipment_preset_# 값이 없는 응답이면 위 필터로 다 비게 될 수 있으니 fallback
           if (!nxEquipItems.length) {
             nxEquipItems = normalizeNxEquipItems(nxEquipRaw, null);
           }
 
           renderMyEquipSelect();
           setMyEquipStatus(`불러오기 완료: ${nxEquipItems.length}개 장비`);
 
+          const detectedStat = detectMainStatFromEquipList(nxEquipItems, getSelectedCubeKind());
+          applyMainStatSelection(detectedStat);
+
           // my mode에서 레벨/부위 선택 잠그기(아이템 선택 후)
           setControlsDisabledByMyEquipMode(true);
 
           // 프리셋 변경 시 아이템 재구성
         } catch (err) {
           console.error(err);
           setMyEquipStatus(`불러오기 실패: ${err.message}`, true);
           alert(`불러오기 실패: ${err.message}`);
         } finally {
           fetchBtn.disabled = false;
         }
       }
 
       if (fetchBtn) fetchBtn.addEventListener("click", doFetchEquip);
 
       if (presetSel) {
         presetSel.addEventListener("change", () => {
           if (!nxEquipRaw) return;
           const presetNo = presetSel.value;
           nxEquipItems = normalizeNxEquipItems(nxEquipRaw, presetNo);
           if (!nxEquipItems.length) nxEquipItems = normalizeNxEquipItems(nxEquipRaw, null);
           selectedEquipKey = "";
           renderMyEquipSelect();
           updateMyEquipSideUI(null);
         });
