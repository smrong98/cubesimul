diff --git a/index.html b/index.html
index 490311db6809b8a6a214c2bdd12629f93fc824b3..31fad49a9b4aa5f32f6991341d4a31904a95261a 100644
--- a/index.html
+++ b/index.html
@@ -378,97 +378,87 @@
   <div class="subtitle">큐브 시뮬레이터</div>
   <div class="page-meta">
     <span id="updateDate"></span>
     <span>/ 제작: 크로아 - 윈메롱</span>
   </div>
 
   <div class="layout">
     <div class="layout-column">
       <!-- 1. 설정 카드 -->
       <section class="card" id="card-settings">
         <h2>설정</h2>
 
         <!-- 내 장비 불러오기 (Nexon Open API) -->
         <div style="margin-top:10px; padding-top:10px; border-top:1px dashed #2d2d2d;">
           <label style="margin-bottom:6px; font-size:0.9rem;">
             <input type="checkbox" id="useMyEquipToggle" />
             내 장비 불러오기 (API Key 필요)
           </label>
 
           <div id="myEquipPanel" style="display:none; margin-top:8px;">
             <div class="row">
               <div>
                 <label for="nxApiKey">Nexon Open API Key</label>
                 <input id="nxApiKey" type="password" placeholder="x-nxopen-api-key" style="width:100%; padding:6px 8px; border-radius:8px; border:1px solid #3f3f46; background:#111111; color:#e5e7eb; font-size:0.9rem;" />
                 <div style="display:flex; gap:8px; align-items:center; margin-top:6px;">
-                  <label style="margin:0; font-size:0.8rem; color:#a1a1aa;">
-                    <input type="checkbox" id="saveApiKeyToggle" checked />
-                    API Key 로컬 저장
-                  </label>
                   <button type="button" class="btn btn-secondary" id="clearApiKeyBtn" style="padding:6px 10px; font-size:0.8rem;">저장된 키 삭제</button>
-                  <button type="button" class="btn btn-secondary" id="toggleApiKeyViewBtn" style="padding:6px 10px; font-size:0.8rem;">보기</button>
                 </div>
               </div>
               <div>
                 <label for="characterName">캐릭터 닉네임</label>
                 <input id="characterName" type="text" placeholder="닉네임" style="width:100%; padding:6px 8px; border-radius:8px; border:1px solid #3f3f46; background:#111111; color:#e5e7eb; font-size:0.9rem;" />
                 <div style="display:flex; gap:8px; margin-top:10px;">
                   <button type="button" class="btn btn-primary" id="fetchMyEquipBtn" style="flex:1;">장비 불러오기</button>
                 </div>
                 <div id="myEquipStatus" style="margin-top:6px; font-size:0.8rem; color:#a1a1aa;"></div>
               </div>
             </div>
 
             <div class="row" style="margin-top:6px;">
               <div>
                 <label for="equipPreset">프리셋</label>
                 <select id="equipPreset">
                   <option value="1" selected>프리셋 1</option>
                   <option value="2">프리셋 2</option>
                   <option value="3">프리셋 3</option>
                 </select>
               </div>
               <div>
                 <label for="myEquipSelect">내 장비 선택 (레전더리만 시뮬 가능)</label>
                 <select id="myEquipSelect" disabled>
                   <option value="">(먼저 장비를 불러오세요)</option>
                 </select>
               </div>
             </div>
 
             <div class="row" style="margin-top:6px;">
-              <div>
-                <label>시뮬 대상</label>
-                <label><input type="radio" name="myEquipSide" value="main" checked />윗잠 (레전더리만)</label>
-                <label><input type="radio" name="myEquipSide" value="addi" />아랫잠 (레전더리만)</label>
-                <div id="myEquipSideHint" style="margin-top:6px; font-size:0.8rem; color:#a1a1aa;"></div>
-              </div>
               <div>
                 <label>자동 설정</label>
                 <div style="font-size:0.85rem; color:#e5e7eb;">
                   <div>부위/레벨: <span id="myEquipAutoPartLevel" style="color:#a1a1aa;">-</span></div>
                   <div style="margin-top:4px;">시작 옵션: <span style="color:#a1a1aa;">선택한 아이템의 잠재로 현재 옵션이 설정됩니다</span></div>
+                  <div style="margin-top:4px;">잠재 상태: <span id="myEquipSideHint" style="color:#a1a1aa;">-</span></div>
                 </div>
               </div>
             </div>
 
             <div style="margin-top:6px; font-size:0.75rem; color:#71717a; line-height:1.35;">
               * Open API는 데이터 반영이 지연될 수 있습니다. 기본 조회일자는 “전일(어제)”입니다.
             </div>
           </div>
         </div>
 
 
       <div class="row">
         <div>
           <label for="itemLevel">아이템 레벨</label>
           <select id="itemLevel">
             <option value="100">100</option>
             <option value="120">120</option>
             <option value="130">130</option>
             <option value="140">140</option>
             <option value="150">150</option>
             <option value="160">160</option>
             <option value="200" selected>200</option>
             <option value="250">250</option>
           </select>
         </div>
@@ -712,51 +702,50 @@
           <div id="rollCountTag">재설정 횟수: 0</div>
           <div id="mesoTag">소모 메소: 0 메소</div>
           <div id="azmosTag" style="display:none; color:#a1a1aa; font-size:0.85rem;">아즈모스 협곡 1만점: 0주</div>
           <div id="cubeTypeTag" class="tag">
             <span class="tag-dot"></span>
             <span>윗잠재</span>
           </div>
         </div>
       </section>
     </div>
   </div>
 
   <!-- 메인 로직 스크립트 -->
   <script>
     const LAST_UPDATE_DATE = "2026-02-02";
     const SETTINGS_STORAGE_KEY = "cubeSimLastSettings";
 
     // ====== Nexon Open API: 내 장비 불러오기 ======
     const NX_API_STORAGE_KEY = "MS_API_KEY_V1";
     const NX_BASE = "https://open.api.nexon.com/maplestory/v1";
 
     let useMyEquip = false;
     let nxEquipRaw = null;     // item-equipment raw response
     let nxEquipItems = [];     // normalized list for current preset
     let selectedEquipKey = "";
-    let selectedEquipSide = "main"; // "main" | "addi"
 
     const PART_TO_PARTSTYPE = {
       "무기": 1,
       "엠블렘": 2,
       "보조무기": 3,
       "포스실드": 4,
       "소울링": 4,
       "방패": 5,
       "모자": 6,
       "상의": 7,
       "한벌옷": 8,
       "하의": 9,
       "신발": 10,
       "장갑": 11,
       "망토": 12,
       "벨트": 13,
       "어깨장식": 14,
       "얼굴장식": 15,
       "눈장식": 16,
       "귀고리": 17,
       "반지": 18,
       "펜던트": 19,
       "기계심장": 20
     };
 
@@ -770,66 +759,64 @@
       const day = String(d.getDate()).padStart(2, "0");
       return `${y}-${m}-${day}`;
     }
 
     function getDefaultNxDate() {
       // Open API는 지연이 있을 수 있어 기본은 전일
       const d = new Date();
       d.setDate(d.getDate() - 1);
       return formatDateYYYYMMDD(d);
     }
 
     function setMyEquipStatus(text, isError=false) {
       const el = document.getElementById("myEquipStatus");
       if (!el) return;
       el.textContent = text || "";
       el.style.color = isError ? "#fca5a5" : "#a1a1aa";
     }
 
     function setControlsDisabledByMyEquipMode(disabled) {
       const itemLevel = document.getElementById("itemLevel");
       const partsType = document.getElementById("partsType");
       if (itemLevel) itemLevel.disabled = disabled;
       if (partsType) partsType.disabled = disabled;
     }
 
-    function setCubeKindForSide(side) {
-      // side: "main" => black/meister 유지, "addi" => addi 강제
-      if (side === "addi") {
-        const r = document.querySelector('input[name="cubeKind"][value="addi"]');
-        if (r) r.checked = true;
-      } else {
-        // 기본은 black. 사용자가 meister로 바꾸는 건 허용
-        const current = document.querySelector('input[name="cubeKind"]:checked')?.value;
-        if (current === "addi") {
-          const r = document.querySelector('input[name="cubeKind"][value="black"]');
-          if (r) r.checked = true;
-        }
-      }
+    function getSelectedCubeKind() {
+      return document.querySelector('input[name="cubeKind"]:checked')?.value || "black";
+    }
+
+    function setCubeKind(kind) {
+      const r = document.querySelector(`input[name="cubeKind"][value="${kind}"]`);
+      if (r) r.checked = true;
       updateCubeTag();
     }
 
+    function getSideFromCubeKind(kind) {
+      return kind === "addi" ? "addi" : "main";
+    }
+
     async function nxFetch(path, apiKey) {
       const res = await fetch(`${NX_BASE}${path}`, {
         headers: { "x-nxopen-api-key": apiKey }
       });
       if (!res.ok) {
         const t = await res.text().catch(() => "");
         throw new Error(`HTTP ${res.status} ${res.statusText}${t ? " - " + t : ""}`);
       }
       return res.json();
     }
 
     async function fetchOcidByName(name, apiKey) {
       const q = encodeURIComponent(name.trim());
       return nxFetch(`/id?character_name=${q}`, apiKey);
     }
 
     async function fetchItemEquipment(ocid, apiKey, dateStr) {
       const qOcid = encodeURIComponent(ocid);
       const qDate = encodeURIComponent(dateStr);
       return nxFetch(`/character/item-equipment?ocid=${qOcid}&date=${qDate}`, apiKey);
     }
 
     function normalizeNxEquipItems(raw, presetNo) {
       if (!raw) return [];
       const list = raw.item_equipment || [];
@@ -896,144 +883,184 @@
       }
 
       const placeholder = document.createElement("option");
       placeholder.value = "";
       placeholder.textContent = "(아이템을 선택하세요)";
       sel.appendChild(placeholder);
 
       nxEquipItems.forEach(e => {
         const opt = document.createElement("option");
         opt.value = e.key;
         opt.textContent = buildEquipOptionLabel(e);
         const enabled = isLegendary(e.mainGrade) || isLegendary(e.addGrade);
         if (!enabled) opt.disabled = true;
         sel.appendChild(opt);
       });
 
       sel.disabled = false;
     }
 
     function getSelectedNxEquip() {
       return nxEquipItems.find(e => e.key === selectedEquipKey) || null;
     }
 
     function updateMyEquipSideUI(equip) {
       const hint = document.getElementById("myEquipSideHint");
-      const mainRadio = document.querySelector('input[name="myEquipSide"][value="main"]');
-      const addiRadio = document.querySelector('input[name="myEquipSide"][value="addi"]');
-
-      const mainOk = equip && isLegendary(equip.mainGrade);
-      const addOk  = equip && isLegendary(equip.addGrade);
-
-      if (mainRadio) mainRadio.disabled = !mainOk;
-      if (addiRadio) addiRadio.disabled = !addOk;
 
       if (!equip) {
         if (hint) hint.textContent = "";
         return;
       }
 
       const partsLabel = equip.partName || "-";
       const lvLabel = equip.reqLev ? `Lv.${equip.reqLev}` : "-";
       const info = `${partsLabel} / ${lvLabel} | 윗:${equip.mainGrade ?? "-"} / 아랫:${equip.addGrade ?? "-"}`;
       if (hint) hint.textContent = info;
+    }
+
+    function normalizeStatText(text) {
+      return (text || "").replace(/\s+/g, "");
+    }
+
+    function detectMainStatFromLines(lines) {
+      const counts = { STR: 0, DEX: 0, INT: 0, LUK: 0, ALLSTAT: 0 };
+      if (!Array.isArray(lines)) return null;
+      lines.forEach(line => {
+        const text = normalizeStatText(line);
+        if (!text) return;
+        if (text.includes("올스탯")) counts.ALLSTAT += 1;
+        if (text.includes("STR") || text.includes("힘")) counts.STR += 1;
+        if (text.includes("DEX") || text.includes("민첩")) counts.DEX += 1;
+        if (text.includes("INT") || text.includes("지력")) counts.INT += 1;
+        if (text.includes("LUK") || text.includes("운")) counts.LUK += 1;
+      });
+
+      let max = 0;
+      Object.values(counts).forEach(val => {
+        if (val > max) max = val;
+      });
+      if (!max) return null;
+
+      const winners = Object.entries(counts).filter(([, val]) => val === max);
+      if (winners.length !== 1) return null;
+      return winners[0][0];
+    }
+
+    function applyMainStatSelection(stat) {
+      if (!stat) return;
+      const radio = document.querySelector(`input[name="mainStat"][value="${stat}"]`);
+      if (radio) {
+        radio.checked = true;
+        saveCurrentSettings();
+      }
+    }
+
+    function isSideLegendary(equip, side) {
+      if (!equip) return false;
+      return side === "addi" ? isLegendary(equip.addGrade) : isLegendary(equip.mainGrade);
+    }
+
+    function ensureValidCubeKindForEquip(equip) {
+      if (!equip) return;
+      const currentKind = getSelectedCubeKind();
+      const mainOk = isSideLegendary(equip, "main");
+      const addOk = isSideLegendary(equip, "addi");
 
-      // 현재 선택 side가 불가능하면 가능한 쪽으로 자동 이동
-      if (selectedEquipSide === "main" && !mainOk && addOk) {
-        selectedEquipSide = "addi";
-        if (addiRadio) addiRadio.checked = true;
-      } else if (selectedEquipSide === "addi" && !addOk && mainOk) {
-        selectedEquipSide = "main";
-        if (mainRadio) mainRadio.checked = true;
+      if (currentKind === "addi") {
+        if (!addOk && mainOk) {
+          setCubeKind("black");
+        }
+      } else {
+        if (!mainOk && addOk) {
+          setCubeKind("addi");
+        }
       }
     }
 
+    function getEquipLinesForCubeKind(equip, cubeKind) {
+      const side = getSideFromCubeKind(cubeKind);
+      return side === "addi" ? equip.addLines : equip.mainLines;
+    }
+
     function applyNxEquipToSimulator(equip) {
       if (!equip) return;
 
       if (!equip.partsType) {
         alert(`지원하지 않는 장비 부위입니다: ${equip.partName || "?"}`);
         return;
       }
       if (!equip.reqLev) {
         alert("아이템 레벨(제한)을 확인할 수 없습니다.");
         return;
       }
 
       // 레벨/부위 자동 설정 + lock
       const itemLevelSel = document.getElementById("itemLevel");
       const partsTypeSel = document.getElementById("partsType");
 
       // itemLevel 옵션에 없는 레벨이면 가장 가까운 상위(?)가 아니라 그대로는 불가능.
       // 현재 UI는 100/120/130/140/150/160/200/250만 지원하므로, 그 외 레벨은 가장 가까운 구간으로 매핑.
       const supported = [100,120,130,140,150,160,200,250];
       let mapped = equip.reqLev;
       if (!supported.includes(mapped)) {
         // 일반적으로 140/160/200/250 구간이므로, 가장 가까운 하한으로 snap
         mapped = supported.reduce((best, v) => (Math.abs(v - equip.reqLev) < Math.abs(best - equip.reqLev) ? v : best), supported[0]);
       }
 
       if (itemLevelSel) itemLevelSel.value = String(mapped);
       if (partsTypeSel) partsTypeSel.value = String(equip.partsType);
 
       // 표시
       const auto = document.getElementById("myEquipAutoPartLevel");
       if (auto) auto.textContent = `${equip.partName} / Lv.${equip.reqLev} (시뮬 레벨: ${mapped})`;
 
-      // 큐브 종류 강제(아랫잠이면 에디)
-      setCubeKindForSide(selectedEquipSide === "addi" ? "addi" : "main");
+      // 큐브 종류 유효성 보정
+      ensureValidCubeKindForEquip(equip);
 
       // 현재 옵션을 "내 장비 잠재"로 덮어쓰기
-      const linesText = (selectedEquipSide === "addi") ? equip.addLines : equip.mainLines;
+      const cubeKind = getSelectedCubeKind();
+      const linesText = getEquipLinesForCubeKind(equip, cubeKind);
       const lines = [];
       for (let i = 0; i < 3; i++) {
         const t = linesText[i] || "-";
         lines.push({ line: i+1, optionText: t, raw: null });
       }
       currentLines = lines;
       rollCandidates = [[], [], []];
 
       // 통계 초기화 + 렌더
       meisterUsed = 0;
       mesoUsed = 0;
       rollCount = 0;
       logEntries = [];
       document.getElementById("log").textContent = "";
       updateCubeTag();
       updateStatsTags();
       renderAllBoxes();
+      applyMainStatSelection(detectMainStatFromLines(linesText));
     }
 
-    function enforceLegendarySideOrWarn(equip, side) {
-      if (!equip) return false;
-      const grade = side === "addi" ? equip.addGrade : equip.mainGrade;
-      if (isLegendary(grade)) return true;
-      alert(`지원하지 않는 잠재 등급입니다 (${side === "addi" ? "아랫잠" : "윗잠"}: ${grade ?? "-"})`);
-      return false;
-    }
-
-
     let bcProbs = [];
     let wcProbs = [];
     let acProbs = []; // 명장의 큐브(윗잠재)
     let allProbs = [];
 
     const CUBE_ID_BLACK = "5062010";   // 기존 윗잠재(블랙)
     const CUBE_ID_ADDI  = "5062500";   // 기존 에디
     const CUBE_ID_MEISTER = "2711004"; // acprobs.json 확인값
 
     let currentLines = [];
     let rollCandidates = [[], [], []];
 
     let meisterUsed = 0; // 명장의 큐브 소모량(개)
     let rollCount = 0;
     let mesoUsed = 0;
     let logEntries = [];
 
     let logVisible = false;
 
     const poolCache = new Map();
 
     const ONLY_ONE_KEYWORDS = [
       "쓸만한",
       "피격 후 무적"
     ];
@@ -1556,51 +1583,57 @@
     }
 
     document.getElementById("applyResetBtn").addEventListener("click", handleReset);
     document.getElementById("autoResetBtn").addEventListener("click", handleReset);
 
 
     document.getElementById("rollBtn").addEventListener("click", () => {
       doOneRollStep();
     });
 
     document.querySelectorAll(".option-box.candidate").forEach(box => {
       box.addEventListener("click", (e) => {
         const idx = Number(e.currentTarget.getAttribute("data-choice")) - 1;
         chooseCandidate(idx);
       });
     });
 
     document.querySelectorAll('input[name="cubeKind"]').forEach(r => {
       r.addEventListener("change", () => {
         // 큐브 타입 변경 시 통계 초기화
         meisterUsed = 0;
         mesoUsed = 0;
         rollCount = 0;
 
         updateCubeTag();
-        initCurrentOption();
+        const eq = useMyEquip ? getSelectedNxEquip() : null;
+        if (eq) {
+          ensureValidCubeKindForEquip(eq);
+          applyNxEquipToSimulator(eq);
+        } else {
+          initCurrentOption();
+        }
         saveCurrentSettings();
       });
     });
 
 
     document.getElementById("itemLevel").addEventListener("change", () => {
       initCurrentOption();
       saveCurrentSettings();
     });
     document.getElementById("partsType").addEventListener("change", () => {
       initCurrentOption();
       saveCurrentSettings();
     });
 
     document.querySelectorAll('input[name="mainStat"]').forEach(r => {
       r.addEventListener("change", () => {
         saveCurrentSettings();
       });
     });
 
     [
       "weaponAutoTarget",
       "additionalAutoLines",
       "additionalCooldownRequired",
       "autoMainIED",
@@ -1613,206 +1646,175 @@
     ].forEach(id => {
       const el = document.getElementById(id);
       if (!el) return;
       const evt = el.type === "number" || el.tagName === "INPUT" ? "input" : "change";
       el.addEventListener(evt, () => {
         saveCurrentSettings();
       });
       if (el.tagName === "SELECT" || el.type === "checkbox") {
         el.addEventListener("change", () => {
           saveCurrentSettings();
         });
       }
     });
 
     document.getElementById("toggleLogBtn").addEventListener("click", () => {
       logVisible = !logVisible;
       updateLogVisibility();
     });
 
     
     // ====== 내 장비 불러오기 UI 바인딩 ======
     function initMyEquipUI() {
       const toggle = document.getElementById("useMyEquipToggle");
       const panel = document.getElementById("myEquipPanel");
       const apiInput = document.getElementById("nxApiKey");
-      const saveToggle = document.getElementById("saveApiKeyToggle");
       const clearBtn = document.getElementById("clearApiKeyBtn");
-      const viewBtn = document.getElementById("toggleApiKeyViewBtn");
       const nameInput = document.getElementById("characterName");
       const fetchBtn = document.getElementById("fetchMyEquipBtn");
       const presetSel = document.getElementById("equipPreset");
       const equipSel = document.getElementById("myEquipSelect");
 
       // load saved api key
       const savedKey = localStorage.getItem(NX_API_STORAGE_KEY);
       if (savedKey && apiInput) apiInput.value = savedKey;
 
       function setPanelVisible(v) {
         if (panel) panel.style.display = v ? "block" : "none";
       }
 
       function setMode(v) {
         useMyEquip = v;
         setPanelVisible(v);
         if (!v) {
           // release lock and reset UI
           setControlsDisabledByMyEquipMode(false);
           nxEquipRaw = null;
           nxEquipItems = [];
           selectedEquipKey = "";
           const auto = document.getElementById("myEquipAutoPartLevel");
           if (auto) auto.textContent = "-";
+          updateMyEquipSideUI(null);
           if (equipSel) {
             equipSel.innerHTML = "<option value=''> (먼저 장비를 불러오세요) </option>";
             equipSel.disabled = true;
           }
           setMyEquipStatus("");
           // 기존 동작으로 복귀: 현재 설정값 기반 재초기화
           initCurrentOption();
         }
       }
 
       if (toggle) {
         toggle.addEventListener("change", () => {
           setMode(toggle.checked);
         });
       }
 
-      if (viewBtn && apiInput) {
-        viewBtn.addEventListener("click", () => {
-          const isPwd = apiInput.type === "password";
-          apiInput.type = isPwd ? "text" : "password";
-          viewBtn.textContent = isPwd ? "숨기기" : "보기";
-        });
-      }
-
       if (clearBtn) {
         clearBtn.addEventListener("click", () => {
           localStorage.removeItem(NX_API_STORAGE_KEY);
           if (apiInput) apiInput.value = "";
           setMyEquipStatus("저장된 키를 삭제했습니다.");
         });
       }
 
       async function doFetchEquip() {
         const apiKey = (apiInput?.value || "").trim();
         const name = (nameInput?.value || "").trim();
         if (!apiKey) { alert("API Key를 입력하세요."); return; }
         if (!name) { alert("닉네임을 입력하세요."); return; }
 
         setMyEquipStatus("OCID 조회 중...");
         fetchBtn.disabled = true;
 
         try {
           const ocidRes = await fetchOcidByName(name, apiKey);
           const ocid = ocidRes?.ocid;
           if (!ocid) throw new Error("OCID를 찾지 못했습니다.");
 
           const dateStr = getDefaultNxDate();
           setMyEquipStatus(`장비 조회 중... (기준일자: ${dateStr})`);
           const equipRes = await fetchItemEquipment(ocid, apiKey, dateStr);
           nxEquipRaw = equipRes;
 
           // 저장(성공 시)
-          if (saveToggle?.checked) {
-            localStorage.setItem(NX_API_STORAGE_KEY, apiKey);
-          }
+          localStorage.setItem(NX_API_STORAGE_KEY, apiKey);
 
           // preset 반영
           const presetNo = presetSel?.value || "1";
           nxEquipItems = normalizeNxEquipItems(nxEquipRaw, presetNo);
 
           // item_equipment_preset_# 값이 없는 응답이면 위 필터로 다 비게 될 수 있으니 fallback
           if (!nxEquipItems.length) {
             nxEquipItems = normalizeNxEquipItems(nxEquipRaw, null);
           }
 
           renderMyEquipSelect();
           setMyEquipStatus(`불러오기 완료: ${nxEquipItems.length}개 장비`);
 
           // my mode에서 레벨/부위 선택 잠그기(아이템 선택 후)
           setControlsDisabledByMyEquipMode(true);
 
           // 프리셋 변경 시 아이템 재구성
         } catch (err) {
           console.error(err);
           setMyEquipStatus(`불러오기 실패: ${err.message}`, true);
           alert(`불러오기 실패: ${err.message}`);
         } finally {
           fetchBtn.disabled = false;
         }
       }
 
       if (fetchBtn) fetchBtn.addEventListener("click", doFetchEquip);
 
       if (presetSel) {
         presetSel.addEventListener("change", () => {
           if (!nxEquipRaw) return;
           const presetNo = presetSel.value;
           nxEquipItems = normalizeNxEquipItems(nxEquipRaw, presetNo);
           if (!nxEquipItems.length) nxEquipItems = normalizeNxEquipItems(nxEquipRaw, null);
           selectedEquipKey = "";
           renderMyEquipSelect();
           updateMyEquipSideUI(null);
         });
       }
 
       if (equipSel) {
         equipSel.addEventListener("change", () => {
           selectedEquipKey = equipSel.value;
           const eq = getSelectedNxEquip();
           updateMyEquipSideUI(eq);
 
           if (!eq) return;
 
           // 기본 side가 레전더리인지 확인 후 적용
-          if (!enforceLegendarySideOrWarn(eq, selectedEquipSide)) {
-            // 가능한 쪽으로 자동 전환(updateMyEquipSideUI에서 처리)
-          }
+          ensureValidCubeKindForEquip(eq);
           applyNxEquipToSimulator(eq);
         });
       }
 
-      document.querySelectorAll('input[name="myEquipSide"]').forEach(r => {
-        r.addEventListener("change", () => {
-          selectedEquipSide = r.value === "addi" ? "addi" : "main";
-          const eq = getSelectedNxEquip();
-          if (!eq) return;
-
-          if (!enforceLegendarySideOrWarn(eq, selectedEquipSide)) {
-            // 롤백: 가능한 쪽으로
-            updateMyEquipSideUI(eq);
-            return;
-          }
-
-          // side에 따라 cubeKind도 함께 바꿈
-          setCubeKindForSide(selectedEquipSide === "addi" ? "addi" : "main");
-          applyNxEquipToSimulator(eq);
-        });
-      });
-
       // 초기 토글 상태
       setPanelVisible(false);
     }
 
 const storedSettings = getStoredSettings();
     applyStoredSettings(storedSettings);
     updateCubeTag();
     updateLogVisibility();
     initMyEquipUI();
 
     // ====== 업데이트 내역 토글 ======
     window.addEventListener("load", () => {
       const box = document.getElementById("changelog");
       const btn = document.getElementById("toggleChangelogBtn");
       if (!box || !btn) return;
 
       let changelogVisible = false;
 
       function updateChangelogVisibility() {
         box.style.display = changelogVisible ? "block" : "none";
         btn.textContent = changelogVisible ? "업데이트 내역 접기" : "업데이트 내역 보기";
       }
 
       btn.addEventListener("click", () => {
         changelogVisible = !changelogVisible;
